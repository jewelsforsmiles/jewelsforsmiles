<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bestel je sieraden</title>
  <style>
    body { font-family: Arial, sans-serif; margin:40px; background-color: #f9f9f9; color:#333; }
    h1 { color:#ff5757; }
    form { background:#fff; padding:20px; border-radius:10px; max-width:500px; box-shadow:0 2px 6px rgba(0,0,0,0.1);}
    label { display:block; margin-top:10px; }
    input, textarea, select, button { width:100%; padding:8px; margin-top:4px; font-size:14px; border:1px solid #ccc; border-radius:5px; }
    button { background:#ff5757; color:white; border:none; margin-top:15px; cursor:pointer; font-size:16px; padding:10px; }
    button:hover { background:#e04848; }
    #totaal { background:#ffd7fe; border:1px solid #ff5757; padding:10px; margin-top:15px; font-weight:bold; text-align:center;}
    footer { margin-top:30px; font-size:12px; color:#888; }
    option.uitverkocht { color:#888; }
  </style>
</head>
<body>
  <h1>Bestel je sieraden</h1>
  <p>Vul je gegevens in. Je ontvangt een Tikkie zodra we je bestelling hebben gecontroleerd.</p>

  <form action="https://formspree.io/f/mdkwvkpd" method="POST">
    <input type="hidden" name="_next" value="https://jewelsforsmiles.github.io/jewelsforsmiles/bedankt.html">

    <label>Naam:
      <input type="text" name="naam" required>
    </label>

    <label>E-mail:
      <input type="email" name="email" required>
    </label>

    <label>Telefoonnummer:
      <input type="tel" name="telefoon" required>
    </label>

    <label>Adres:
      <textarea name="adres" rows="3" placeholder="Straat, Postcode, Plaats"></textarea>
    </label>

    <label>Product:
      <select id="product" name="product" required>
        <option value="">— Kies een product —</option>
        <option value="Sterren ketting" data-prijs="4" data-voorraad="2">Sterren ketting (€4)</option>
        <option value="Parel ketting" data-prijs="5" data-voorraad="2">Parel ketting (€5)</option>
        <option value="Blauwe armbanden set" data-prijs="7" data-voorraad="2">Blauwe armbanden set (€7)</option>
        <option value="Roze/groene armbanden set" data-prijs="7" data-voorraad="2">Roze/groene armbanden set (€7)</option>
        <option value="Evil eye armband" data-prijs="3.5" data-voorraad="2">Evil eye armband (€3,50)</option>
        <option value="Hot/soft pink kralen bloemen oorbellen" data-prijs="3.5" data-voorraad="2">Kralen bloemen oorbellen (€3,50)</option>
        <option value="Kralen cirkel oorbellen" data-prijs="5" data-voorraad="2">Kralen cirkel oorbellen (€5)</option>
        <option value="Charms ketting" data-prijs="7" data-voorraad="2">Charms ketting (€7)</option>
      </select>
    </label>

    <label>Aantal:
      <input type="number" id="aantal" name="aantal" value="1" min="1" required>
    </label>

    <label>Kleur (indien van toepassing):
      <select id="kleur" name="kleur">
        <option value="">Geen / standaard</option>
        <option value="Blauw">Blauw</option>
        <option value="Groen">Groen</option>
        <option value="Rood">Rood</option>
        <option value="Geel">Geel</option>
        <option value="Hot pink">Hot pink</option>
        <option value="Soft pink">Soft pink</option>
      </select>
    </label>

    <label>Verzendoptie:</label>
    <input type="radio" name="verzendoptie" value="Brievenbuspost €2,62" checked> Brievenbuspost (€2,62 t/m 5 items)<br>
    <input type="radio" name="verzendoptie" value="Track & Trace €4,25"> Track & Trace (€4,25 of ≥6 items)

    <div id="totaal">Totaal: €0,00</div>

    <textarea name="opmerkingen" rows="3" placeholder="Eventuele extra info..."></textarea>
    <input type="hidden" name="_subject" value="Nieuwe bestelling via website">
    <button type="submit">Bestel — ik betaal via Tikkie</button>
  </form>

  <footer>
    <p>Na het versturen ontvang je binnen 24 uur een Tikkie via e-mail of WhatsApp.</p>
  </footer>

  <script>
    const productSelect = document.getElementById('product');
    const aantalInput = document.getElementById('aantal');
    const totaalDiv = document.getElementById('totaal');
    const verzendRadios = document.getElementsByName('verzendoptie');

    function updateVoorraad() {
      for(let i=0; i<productSelect.options.length; i++){
        const opt = productSelect.options[i];
        const voorraad = parseInt(opt.dataset.voorraad || 0);
        if(voorraad <=0 && opt.value !== ""){
          opt.disabled = true;
          opt.textContent += " (Uitverkocht)";
          opt.classList.add('uitverkocht');
        }
      }
    }

    function berekenTotaal() {
      const prijs = parseFloat(productSelect.selectedOptions[0]?.dataset.prijs || 0);
      let aantal = parseInt(aantalInput.value) || 0;
      const maxVoorraad = parseInt(productSelect.selectedOptions[0]?.dataset.voorraad || 0);

      if(aantal > maxVoorraad){
        alert(`Er zijn maar ${maxVoorraad} stuks beschikbaar.`);
        aantalInput.value = maxVoorraad;
        aantal = maxVoorraad;
      }

      let verzend = 0;
      if(aantal >=6){
        verzendRadios[0].disabled = true;
        verzendRadios[1].checked = true;
        verzend = 4.25;
      } else {
        verzendRadios[0].disabled = false;
        verzend = verzendRadios[0].checked ? 2.62 : 4.25;
      }
      if(verzendRadios[0].disabled && verzendRadios[1].checked) verzend = 4.25;

      const totaal = (prijs * aantal) + verzend;
      totaalDiv.textContent = `Totaal: €${totaal.toFixed(2).replace('.',',')}`;
    }

    productSelect.addEventListener('change', berekenTotaal);
    aantalInput.addEventListener('input', berekenTotaal);
    verzendRadios.forEach(r => r.addEventListener('change', berekenTotaal));
    window.addEventListener('load', () => { updateVoorraad(); berekenTotaal(); });
  </script>
</body>
</html>
